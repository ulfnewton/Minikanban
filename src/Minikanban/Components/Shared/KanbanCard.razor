@inherits StateAwareComponent

@using Minikanban.Services
@inherits Minikanban.Components.Shared.StateAwareComponent

<div class="card">
    <strong>@Card.Title</strong>
    <p>@Card.Description</p>

    <RoleGate Roles="@(new[] { "Author", "Admin" })">
        <div class="move-buttons">
            @foreach (var target in State.Columns.Select(c => c.Name).Where(n => n != ColumnName))
            {
                <button @onclick="() => MoveToAsync(target)">Flytta till @target</button>
            }
        </div>
    </RoleGate>
</div>

@code {
    [Parameter] public Minikanban.Models.KanbanCard Card { get; set; } = default!;
    [Parameter] public string ColumnName { get; set; } = default!;

    private Task MoveToAsync(string to)
        => State.MoveCardAsync(ColumnName, to, Card.Id);
}
